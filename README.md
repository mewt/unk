# UNK

UNK stands for Ultimate Ngoprek Keyboard, my own version of <a href="https://ultimatehackingkeyboard.com/">UHK</a>. Hope this will be my endgame (I know it's a lie) keyboard. ~~This is still a work-in-progress build logs.~~ <a href="https://github.com/herpiko/unk/blob/master/README.md#build-logs">The build logs is nearly complete</a>.

<img width="650" src="/images/finished.png">

## Goals

- Cheap ðŸ‘Ž
- As thin as possible (thinner than Vortex Core) ðŸ‘Ž
- Fully programmable (QMK) âœ…
- Almost zero learning curve (horizontally staggered, ~ortholinear~, ~symbols through modifier/layer~) âœ…
- Ergonomic as UHK (splitted) âœ…
- Generic size of keycaps (combinations from 145 keycaps set should be fitted) âœ…
- Interchangeable middle modules (touchpad, trackball, smartphone dock) ðŸ‘Ž

## Layout

- Combined : http://www.keyboard-layout-editor.com/#/gists/457787e3b1938c4cbe9d65c7b7bd31ef
- Left half: http://www.keyboard-layout-editor.com/#/gists/f117f3cbc2d0b1bf17206992068f9017
- Right half: http://www.keyboard-layout-editor.com/#/gists/e9e79566d1be71f77f1f2d33660011e5

<img src="/images/layout.png">

## Plate

Download:
- <a href="https://github.com/herpiko/unk/raw/master/unk-plate-layout.svg">SVG (Inkscape)</a>
- ~~<a href="https://github.com/herpiko/ultimate-ngoprek-keyboard/raw/master/split-full-final-cut.ai">Adobe Illustrator</a>~~

<img src="/images/plate-design.png">

## Anatomy

<img src="/images/component-anatomy.png">

The greens are on the top plate. The oranges are on the bottom.

1. USB-C female to Micro USB male converter
2. Pro Micro clone
3. Tactile switch
4. TRRS jack
5. Neodyum magnets

## Parts

| Item  | Price (rupiah) |
| ------------- | -------------: |
| Existing DSA keycaps set from a <a href="https://www.google.com/search?q=vortex+tab+75&source=lnms&tbm=isch">Vortex Tab 75 keyboard</a> | 0 |
| <a href="https://www.tokopedia.com/vortexseries/ks-9-gateron-brown-switch-tactile-plate-mounted">Gateron Brown switches</a>, 68 @ Rp 2.400 | 163.200 |
| <a href="https://www.tokopedia.com/tokopuwei/dioda-in4148-1n-4148-in-4148-dip-diode-1n4148-do35-ac85-harga-1-pcs">IN4148 diodes</a>, 200 @ Rp 100 | 20.000 |
| <a href="https://www.tokopedia.com/solarperfect/pro-micro-promicro-atmega32u4-16mhz-5v-arduino-module">Pro micro ATMEGA32U4 16Mhz 5V</a>, 2 @ Rp 52.800 | 105.600 |
| Stainless steel plates + laser cutting service at <a href="https://www.instagram.com/laserindonesia/">Laser Indonesia</a>, 1.5mm top plate + 2.0mm bottom plate | 463.000 |
| <a href="https://www.tokopedia.com/pixlup/genuine-cherry-pcb-mount-stabilizer-stabilizers-fullsize">Cherry switch stabilizers (1x6u, 6x2u)</a> | 210.000 |
| <a href="https://www.tokopedia.com/hpasesoris/m3x6mm-m3-6-black-nylon-hex-nut-m3-thread-female-standoff-spacer-aq21">M3 x 6mm female to female spacer</a>, 30 @ Rp 1.200 | 36.000 |
| <a href="https://www.tokopedia.com/pcmjakarta/kabel-tunggal-mini-tembaga-0-5mm-40meter">Single copper wire 0.5mm</a>, 40 meter | 30.000 |
| <a href="https://www.tokopedia.com/stickerkacafilm/stikerstickermotormobilstiker-karboncarbon3d-hitam-dof">Carbon vinyl sticker 30 meter</a> | 45.000 |
| <a href="https://www.tokopedia.com/kiddiesworld123/magnet-super-neodymium-kepingan-persegi-kotak-ndfeb-20-x-10-x-2-mm">Neodyum super magnet 20 x 10 x 2mm</a>, 16 @ Rp 3.700 | 59.200 |
| <a href="https://www.tokopedia.com/adelioberkah/baut-screw-kecil-m3x3-laptop-hp-toshiba-dell-samsung-asus-acer-lenovo">M3x3mm screw for top plate</a>, 20 @ Rp 3.000 | 60.000 |
| <a href="https://www.tokopedia.com/crd/m3-x-5mm-button-head-hex-screw-1pcs-baut-hex-m3x5mm-1pcs">M3x5mm hex screw for bottom plate</a>, 30 @ Rp 1.500 | 45.000 |
| <a href="https://www.bukalapak.com/p/komputer/aksesoris-226/keyboard/6ere8e-jual-wood-wrist-rest-for-tenkeyless-size-mechanical-keyboard-brown">Wood wrist rest for TKL size mechanical keyboard (36cm)</a> | 100.000 |
| <a href="https://www.tokopedia.com/qacc/type-c-to-microusb-adapter-converter-otg-adaptor-type-c-to-micro-usb">Type C USB to micro USB adapter</a>, 2 @ Rp 15.000 | 30.000 |
| <a href="https://www.bukalapak.com/p/elektronik/komponen-elektronik/zzdmgd-jual-tactile-switch-push-button-saklar-tekan-6x6x10-mm-arduino-elektronika-bread-board-pcb?product_sku=2181000539">Tactile switch push button 6 x 6 x 10mm</a>, 2 @ Rp 2.800 | 5.600 |
| <a href="https://www.tokopedia.com/myofficialstore0/trrs-pcb-3-5mm-breakout-jack-headset-headphone-earphone-socket-diy-merah">TRRS PCB 3.5mm jack socket</a>, 2 @ Rp 12.000 | 24.000 |
| <a href="https://www.tokopedia.com/herzhz/35mm-trrs-4-pole-for-hifiman-balanced-male-plug-jack-35">3.5mm TRRS 4 pins male plug</a>, 2 @ Rp 12.500 | 25.000 |
| <a href="https://www.tokopedia.com/optimuspri/joyseus-2-in-1-coiled-data-cable-1-m-micro-usb-type-c">Joyseus 2 in 1 coiled data cable 1M (micro USB & type C)</a> | 45.000 |
| <a href="https://www.tokopedia.com/3mtapes/3m-sj-5306-bumpon-clear">3M SJ-5306 Bumpon Clear</a> | 18.000 |

*The list is excluding shipping cost and wrong parts those I purchased. Some items were purcashed more than the need for spare/stockpile. If the whole things counted, it reached almost 2 million rupiahs.*

## Firmware

### Preparation
```
$ git clone https://github.com/qmk/qmk_firmware.git
$ ./util/qmk_install.sh
```

Then copy the UNK firmware directory to QMK
```
$ cp -vR /path/to/ultimate-ngoprek-keyboard/firmware keyboards/unk
```

### Compile
```
$ make unk/rev1:default
```

### Flashing the left half

Press the reset button twice and fast, then:
```
$ sudo avrdude -p atmega32u4 -c avr109 -U ./.build/unk_rev1_default.hex -P /dev/ttyACM0

```

### Flashing the right half

Uncomment the line that state `#define MASTER_LEFT` in `keyboards/unk/rev1/config.h`, then:

```
$ make unk/rev1:default
```

Press the reset button twice and fast, then:

```
$ sudo avrdude -p atmega32u4 -c avr109 -U ./.build/unk_rev1_default.hex -P /dev/ttyACM0
```
## Usage

- `Layer` + `1` to switch to Qwerty layout
- `Layer` + `2` to switch to Colemak layout

## Useful links

The sources I read for building this keyboard:

- Keyboard layout editor, http://www.keyboard-layout-editor.com/
- Plate builder, http://builder.swillkb.com/
- Laser cutting service, https://lasergist.com/shop/lasergist/
- Pro micro official guides/FAQ, https://learn.sparkfun.com/tutorials/pro-micro--fio-v3-hookup-guide/troubleshooting-and-faq
- Handwiring split guide based on lets_split, https://johannes-jansson.github.io/projects/2018/07/23/hand-wiring-lets-split.html
- Handwiring guide, https://geekhack.org/index.php?topic=87689.0
- https://www.reddit.com/r/olkb/comments/5s8q76/help_pro_micro_pinout_for_qmk/
- Thinkpad trackpoint, https://electronics.stackexchange.com/questions/189790/determining-trackpoint-pinout
- Pro micro built-in LEDs, https://www.electronicsweekly.com/blogs/engineer-in-wonderland/arduino-micro-direct-access-board-leds-2017-08/
- TRRS in  Pro Micro + QMK, https://beta.docs.qmk.fm/using-qmk/hardware-features/feature_split_keyboard
- Blackberry trackpad, https://vlukash.com/2019/01/15/trackpad-in-keycap-corne-crkbd-keyboard/
- Adding layers, https://thomasbaart.nl/2018/12/06/qmk-basics-how-to-add-a-layer-to-your-keymap/
- Layers, https://jayliu50.github.io/qmk-cheatsheet/

## Build Logs

### 20200612

The wish was occured a loooooong time ago but I began to (seriously) design the keyboard from this date. I also started to purchase the parts that I need to build the keyboard.

### 20200615

Pro micro clones arrived. Small important things.

<img width="650" src="/images/promicro.png">

### 20200617

The plates arrived. The top plate's thickness is 1.5mm and the bottom plate is 2mm. I'm a bit surprissed that these plates were quite heavy. Heavy (p)unk keyboard!

<img width="650" src="/images/plate-1.jpg">
<img width="650" src="/images/plate-3.jpg">

### 20200619

I put carbon-like sticker on the inner side of bottom plate to avoid shorting from the wiring.

<img width="650" src="/images/split-magnet.png">

Also there were four strong neodyum magnets to help the two parts stick together.

<img width="650" src="/images/split-magnet.gif">

### 20200620

Handwired. Pardon my mediocre soldering skill.

<img width="650" src="/images/handwired.png">

<img width="650" src="/images/pro-micro-testing.jpg">

### 20200622

Fully working left half. I was still playing and learn how to work with QMK firmware code.

<img width="650" src="/images/left-half-test-on-game.gif">

<img width="650" src="/images/writedown.jpg">


### 20299623

DO NOT USE SUPER GLUE TO GLUE YOUR SWITCHES TO THE PLATE.

Oh boy, just don't. I'm a big fan of super glue as it's very versatile, strong adhesive, and quick-drying. Super glue has this kind of vapor that makes white mark around the surface that you glued on. My super glue is the strong one. This marks got into my switches' housing, contaminated the copper contacts, and makes it unusable!

Because of my stupidity, I've to unplugged all the switches. I've to redo all the works that has been done on switches: matrix soldering and gluing. Plentiful of switches become the victims. Huft!

<img width="650" src="/images/unplugged-switches.jpg">

Use hot glue instead. Hot glue is quite strong to hold your switches but very easy to remove in case that you want to change some bad switches.

I'll use super glue only to things that need strong hold on the plate like USB-C port. reset tactile switch,  TRRS jack.

I've seen some videos of making handwired keyboard and got some idea for better handwiring. I'll be using ~~0.35mm magnet coil wire~~ single core copper wire.

### 20299624

Need to cut out the height of the switches and stabilizer so I can push the  thickness limit. It'll be using 6mm spacer. The original uncut version is on the left. The middle is the common cut. The right one was forced to be cut like that to make more room for the neodyum magnet.

<img width="650" src="/images/switch-cut.jpg">

<img width="650" src="/images/stabilizer-cut.jpg">


I reglued the switches back into the plate using hot glue. Quite easy but messy. Note that you have to clean the "spider web" things from the hot glue. If this thing makes it way into your switch housing or the stabilizer, it'll makes it feels terrible.

<img width="650" src="/images/hot-glue.png">

### 20299625

While waiting for the wire to be arrived, I made a pair of wrist rest from an unused one.

<img width="650" src="/images/wrist-rest-1.jpg">
<img width="650" src="/images/wrist-rest-2.jpg">
<img width="650" src="/images/wrist-rest-3.jpg">

The TRRS cable was also being made.

<img width="650" src="/images/trrs-1.png">

Turned out that the TRRS jack is too thick for 6mm spacer. I need to set apart the jack port from the PCB.

<img width="650" src="/images/components.png">

### 20200627

Fully handwired.

<img width="650" src="/images/fully-handwired.jpg">

Components placement. Glued with super glue (except for the Pro micros).

<img width="650" src="/images/components-2.jpg">

Bumpons added as rubber foot. Also another neodyum magnet to force the wrist rest stick with the board.

<img width="650" src="/images/bumpon.jpg">

Multimeter tool is a must here. Need to check the entire wiring carefully.

<img width="650" src="/images/multimeter-testing.png">

I found an inverted diode and fixed it.

<img width="650" src="/images/inverted-diode.jpg">

Forgot that the neodyum magnet's coating is conductive so I put the sticker on these too.

<img width="650" src="/images/magnet-shorted.png">

Entering programming phase. QMK is fun. I'm using deltasplit75 as the base.

<img width="650" src="/images/firmware-testing.gif">

Side views. You can see that the reset button is easy to reach with your nail.

<img width="650" src="/images/side-view.jpg">
<img width="650" src="/images/side-view-2.jpg">



Finished!

<img width="650" src="/images/finished.png">

